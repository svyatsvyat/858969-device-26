var button=document.querySelector(".contact-btn"),contactPopup=document.querySelector("#contact-form"),close=document.querySelector("#form-close"),contactForm=contactPopup.querySelector("form"),user=contactForm.querySelector("[name=name]"),email=contactForm.querySelector("[name=email]"),mapButton=document.querySelector(".preview-map"),mapPopup=document.querySelector("#map-form"),mapClose=document.querySelector("#map-close"),isStorageSupport=!0,storageUser="",storageEmail="";try{storageUser=localStorage.getItem("user"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}button.addEventListener("click",function(e){e.preventDefault(),contactPopup.classList.add("modal-show"),storageUser||storageEmail||user.focus(),storageUser&&!storageEmail&&(user.value=storageUser,email.focus()),!storageUser&&storageEmail&&(email.value=storageEmail,user.focus()),storageUser&&storageEmail&&(user.value=storageUser,email.value=storageEmail)}),contactForm.addEventListener("submit",function(e){user.value&&email.value?isStorageSupport&&(localStorage.setItem("user",user.value),localStorage.setItem("email",email.value)):(e.preventDefault(),contactPopup.classList.remove("modal-error"),contactPopup.offsetWidth=contactPopup.offsetWidth,user.value||user.classList.add("error"),email.value||email.classList.add("error"),contactPopup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),contactPopup.classList.contains("modal-show")&&contactPopup.classList.remove("modal-show"))}),close.addEventListener("click",function(e){e.preventDefault(),contactPopup.classList.remove("modal-show"),contactPopup.classList.remove("modal-error")}),mapButton.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("modal-show")}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),mapPopup.classList.contains("modal-show")&&(mapPopup.classList.remove("modal-show"),mapPopup.classList.remove("modal-error")))});
